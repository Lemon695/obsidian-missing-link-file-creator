export const translations = {
	'en-GB': {
		// Command names
		createFilesForUnresolvedLinksInCurrentFile: 'Create files for unresolved links in current file',
		scanFolderAndCreateMissingFiles: 'Scan folder and create missing files',
		scanEntireVaultAndCreateMissingFiles: 'Scan entire vault and create missing files',
		manageFileCreationRules: 'Manage file creation rules',
		createFilesForSelectedUnresolvedLinks: 'Create files for selected unresolved links',

		// Main plugin
		loadingPlugin: 'Loading plugin v',

		// Settings
		notificationSettings: 'Notification settings',
		notificationSettingsDesc: 'Show a notification when a file is create',
		defaultPath: 'Default path',
		defaultPathDesc: 'Set the default folder where new md files will be created.',
		templateFolder: 'Template folder',
		templateFolderDesc: 'Set the folder for template files',
		enableTemplates: 'Enable templates',
		enableTemplatesDesc: 'Use template feature when creating files',
		addAliasesToFrontmatter: 'Add aliases to frontmatter',
		addAliasesToFrontmatterDesc: 'When enabled, aliases from links will be added to frontmatter, disable this if it conflicts with templater.',
		rulesManagement: 'Rules management',
		enableRules: 'Enable rules',
		enableRulesDesc: 'Automatically apply different target folders and templates based on filename patterns',
		manageRules: 'Manage rules',
		manageRulesDesc: 'Add, edit and delete file creation rules',
		manageRulesButton: 'Manage rules',
		developer: 'Developer',
		debugMode: 'Debug mode',
		debugModeDesc: 'Enable debug mode to log detailed information to the console.',

		// Settings - Rule summary
		rulesConfigured: '{count} rules configured',
		andMoreRules: '... and {count} more rules',

		// Notices
		noActiveFile: 'No active file found',
		analyzingLinks: 'Analyzing links...',
		noLinkableFilesFound: 'No linkable files found',
		noMarkdownFilesFoundInFolder: 'No markdown files found in folder',
		currentFileNotInFolder: "Current file isn't in a folder",
		noMarkdownFilesFoundInVault: 'No markdown files found in vault',
		noLinkableFilesFoundInEntireVault: 'No linkable files found in entire vault',
		scanningFolder: 'Scanning folder',
		scanningVault: 'Scanning vault',
		noLinksFoundInSelectedText: 'No links found in selected text',
		noLinkableFilesToCreate: 'No linkable files to create',
		errorProcessingFile: 'Error processing file: {message}',
		errorProcessingFolder: 'Error processing folder: {message}',
		errorScanningVault: 'Error scanning vault: {message}',

		// File operations
		creatingFiles: 'Creating Files: {path}',
		usingTemplate: 'Using template: {path}',
		createDirectory: 'Create Directory: {path}',
		cannotCreateDirectory: 'Cannot Create Directory "{path}": {message}',
		applyingTemplate: 'Applying template: {template} to file: {file}',
		processingWithTemplater: 'Processing template with Templater',
		fileProcessedWithTemplater: 'File has been processed with Templater: {path}',
		templaterReturnedEmptyContent: 'Templater processing returned empty content, will attempt basic processing',
		templaterProcessingFailed: 'Templater processing failed: {message}',
		fileAlreadyExists: 'File already exists: {file}',
		processingWithBasicTemplate: 'Processing with basic template',
		initialFileCreated: 'Initial file has been created: {path}',
		fileContentUpdated: 'File content has been updated using basic processing: {path}',
		templateFileNotFound: 'Template file not found: {path}',
		failedToApplyTemplate: 'Failed to apply template: {message}',
		fileCreatedTemplateApplyFailed: 'File has been created, but applying the template failed: {message}',
		creatingFileNoTemplate: 'Creating file (No Template): {path}',
		autoAddedTags: 'Auto-added tags to {path}: {tags}',
		errorAddingAutoTags: 'Error adding auto-tags',
		failedToCreateFile: 'Failed to Create File',
		failedToCreateFileMessage: 'Failed to Create File: {message}',
		renamedConflictingPath: 'Renamed conflicting path to: {path}',
		skippingExistingFile: 'Skipping existing file: {path}',
		addedAlias: 'Added alias "{alias}" to file "{file}"',
		skippingExistingFileAtPath: 'Skipping existing file at specific path: {path}',
		skippingExistingFileInVault: 'Skipping existing file in vault: {file}',
		skippingExistingFileNoAliases: 'Skipping existing file with no new aliases: {path}',

		// UI Manager
		operationComplete: 'Operation complete',
		successfullyCreated: 'Successfully created: {count} files',
		skipped: 'Skipped: {count} files',
		failed: 'Failed: {count} files',
		aliases: 'Aliases: {count}',
		bulkRenameFiles: 'Bulk rename files',
		currentPath: 'Current path',
		newPath: 'New path',
		batchReplace: 'Batch replace: ',
		find: 'Find...',
		replaceWith: 'Replace with...',
		apply: 'Apply',
		cancel: 'Cancel',
		confirmRename: 'Confirm rename',

		// Creation Confirm Modal
		createFiles: 'Create files',
		linksDetected: '{count} links detected. Select files to be created:',
		filename: 'Filename',
		path: 'Path',
		matchedRule: 'Matched rule',
		actions: 'Actions',
		preview: 'Preview',
		previewFunctionNotAvailable: 'Preview function is not available',
		failedToGeneratePreview: 'Failed to generate preview: {message}',
		noFilesToCreate: 'No files to create',
		page: 'Page {current}/{total}, {fileCount} files total, {selectedCount} selected',
		previous: 'Previous',
		next: 'Next',
		pleaseSelectAtLeastOneFile: 'Please select at least one file',
		creatingFilesProgress: 'Creating files',
		creatingFilesStatus: 'Creating files • {current} of {total}',
		fileCreationCompleted: 'File creation completed ({total}/{total})',
		createSelectedFiles: 'Create selected files',
		source: 'Source',

		// Rule Management Modal
		fileCreationRulesManagement: 'File creation rules management',
		rulesManagementDescription: 'Rules determine file creation location and template based on filename patterns. Priority is listed from high to low.',
		searchRules: 'Search rules...',
		addRule: 'Add rule',
		close: 'Close',
		noRulesCreatedYet: 'No rules created yet',
		rulesAutomateDescription: 'Rules automate file placement and template assignment based on filenames.',
		createFirstRule: 'Create first rule',
		ruleName: 'Rule name',
		matchConditions: 'Match conditions',
		targetFolder: 'Target folder',
		useTemplate: 'Use template',
		enabled: 'Enabled',
		disabled: 'Disabled',
		editRule: 'Edit rule',
		moveUp: 'Move up',
		moveDown: 'Move down',
		deleteRule: 'Delete rule',
		ruleDeleted: 'Rule deleted',
		confirmDeletion: 'Confirm deletion',
		confirmDeleteRule: 'Are you sure you want to delete rule "{name}"?',
		delete: 'Delete',
		noMatchConditions: 'No match conditions',

		// Condition operators and types
		and: 'and',
		or: 'or',
		not: 'not',
		exclude: 'exclude',
		contains: 'contains',
		beginsWith: 'begins with',
		endsWith: 'ends with',
		matches: 'matches',
		regex: 'regex',

		// Rule Edit Modal
		createRule: 'Create Rule',
		enable: 'Enable',
		enableDisableRule: 'Enable or disable this rule',
		matching: 'Matching',
		addCondition: 'Add condition',
		targetSettings: 'Target settings',
		targetFolderDesc: 'Matched files will be created in this folder',
		useTemplateDesc: 'Template used when creating files',
		selectTemplate: 'Select template',
		browseTemplates: 'Browse templates',
		templateAliasHandling: 'Template alias handling',
		templateAliasHandlingDesc: 'Control how aliases are handled when using templater',
		skipTemplaterHandlesAliases: 'Skip (templater handles aliases)',
		mergeWithTemplate: 'Merge with template',
		clickAddCondition: 'Click "add condition" to create your first matching rule',
		save: 'Save',
		ruleNameCannotBeEmpty: 'Rule name cannot be empty',
		atLeastOneConditionRequired: 'At least one match condition must be added',
		matchPatternCannotBeEmpty: 'Match pattern cannot be empty',
		invalidRegularExpression: 'Invalid regular expression',
		ruleSaved: 'Rule "{name}" saved',
		ruleEditingCancelled: 'Rule editing cancelled',
		ruleNamePrompt: 'Rule Name',
		enterRuleName: 'Enter rule name',
		noTemplatesFound: 'No templates found, please check template folder settings',

		// Generic Input Prompt
		noNewNameProvided: 'No new name provided',

		// Placeholders
		exampleFolder: 'Example: folder1/folder2',
		exampleTemplates: 'Example: templates',
		newPathPlaceholder: 'New path...',

		// Common values
		defaultValue: '(Default)',
		noneValue: '(None)',
		plusMoreConditions: '...plus {count} more conditions',

		// Dashboard
		dashboardTitle: 'Missing Links',
		dashboardCreateSelected: 'Create Selected',
		dashboardCreateSelectedTooltip: 'Create selected files (Cmd+Enter)',
		dashboardRefreshTooltip: 'Refresh Data (Cmd+Shift+R)',
		dashboardSearchPlaceholder: 'Search links...',
		dashboardScopeVault: 'Scope: Entire Vault',
		dashboardScopeActive: 'Scope: Current File',
		dashboardScopeSwitched: 'Scope switched to: {scope}',
		dashboardSortCountDesc: 'Ref Count (High to Low)',
		dashboardSortCountAsc: 'Ref Count (Low to High)',
		dashboardSortNameAsc: 'Name (A-Z)',
		dashboardSortNameDesc: 'Name (Z-A)',
		dashboardGroupByFolder: 'Group by Folder',
		dashboardListView: 'List View',
		dashboardScanError: 'Error scanning vault: {message}',
		dashboardNoLinksSelected: 'No links selected',
		dashboardCreatedCount: 'Created {current}/{total} files',
		dashboardColName: 'Link Name',
		dashboardColRef: 'Ref',
		dashboardColPath: 'Suggested Path',
		dashboardColActions: 'Actions',
		dashboardNoMatchesTitle: 'No matches found',
		dashboardNoMatchesDesc: 'No links match "{query}"',
		dashboardAllClearTitle: 'All Clear!',
		dashboardAllClearDesc: 'No missing links found in your vault.',
		dashboardShowingRows: 'Showing {start}-{end} of {total} {unit}',
		dashboardPageInfo: 'Page {current} of {total}',
		dashboardUnitLinks: 'links',
		dashboardUnitFolders: 'folders',

		// Side View
		sideViewDisplayText: 'Current File Links',
		sideViewHeader: 'Missing in Active File',
		sideViewRefresh: 'Refresh',
		sideViewNoActiveFile: 'No active file',
		sideViewEmptyNoActive: 'No file is currently active.',
		sideViewEmptyAllClear: 'No missing links!',
		sideViewCreateTooltip: 'Create',
		sideViewIgnoreTooltip: 'Ignore',
		sideViewCreated: 'Created "{file}"',
		sideViewCreatedWithRule: '✓ Created: {file} (Rule: {rule})',
		sideViewCreatedNoRule: '✓ Created: {file}',
		sideViewIgnored: 'Ignored "{file}"',
		sideViewCreateFailed: 'Failed to create file',
	},
	'zh': {
		// 命令名称
		createFilesForUnresolvedLinksInCurrentFile: '为当前文件中的未解析链接创建文件',
		scanFolderAndCreateMissingFiles: '扫描文件夹并创建缺失文件',
		scanEntireVaultAndCreateMissingFiles: '扫描整个仓库并创建缺失文件',
		manageFileCreationRules: '管理文件创建规则',
		createFilesForSelectedUnresolvedLinks: '为选中的未解析链接创建文件',

		// 主插件
		loadingPlugin: '加载插件 v',

		// 设置
		notificationSettings: '通知设置',
		notificationSettingsDesc: '创建文件时显示通知',
		defaultPath: '默认路径',
		defaultPathDesc: '设置创建新 md 文件的默认文件夹',
		templateFolder: '模板文件夹',
		templateFolderDesc: '设置模板文件的文件夹',
		enableTemplates: '启用模板',
		enableTemplatesDesc: '创建文件时使用模板功能',
		addAliasesToFrontmatter: '将别名添加到 frontmatter',
		addAliasesToFrontmatterDesc: '启用后,链接中的别名将添加到 frontmatter,如果与 templater 冲突请禁用此选项',
		rulesManagement: '规则管理',
		enableRules: '启用规则',
		enableRulesDesc: '根据文件名模式自动应用不同的目标文件夹和模板',
		manageRules: '管理规则',
		manageRulesDesc: '添加、编辑和删除文件创建规则',
		manageRulesButton: '管理规则',
		developer: '开发者',
		debugMode: '调试模式',
		debugModeDesc: '启用调试模式以将详细信息记录到控制台',

		// 设置 - 规则摘要
		rulesConfigured: '已配置 {count} 条规则',
		andMoreRules: '... 还有 {count} 条规则',

		// 通知
		noActiveFile: '未找到活动文件',
		analyzingLinks: '分析链接中...',
		noLinkableFilesFound: '未找到可链接的文件',
		noMarkdownFilesFoundInFolder: '文件夹中未找到 markdown 文件',
		currentFileNotInFolder: '当前文件不在文件夹中',
		noMarkdownFilesFoundInVault: '仓库中未找到 markdown 文件',
		noLinkableFilesFoundInEntireVault: '整个仓库中未找到可链接的文件',
		scanningFolder: '扫描文件夹',
		scanningVault: '扫描仓库',
		noLinksFoundInSelectedText: '选中文本中未找到链接',
		noLinkableFilesToCreate: '没有可创建的可链接文件',
		errorProcessingFile: '处理文件时出错: {message}',
		errorProcessingFolder: '处理文件夹时出错: {message}',
		errorScanningVault: '扫描仓库时出错: {message}',

		// 文件操作
		creatingFiles: '创建文件: {path}',
		usingTemplate: '使用模板: {path}',
		createDirectory: '创建目录: {path}',
		cannotCreateDirectory: '无法创建目录 "{path}": {message}',
		applyingTemplate: '应用模板: {template} 到文件: {file}',
		processingWithTemplater: '使用 Templater 处理模板',
		fileProcessedWithTemplater: '文件已使用 Templater 处理: {path}',
		templaterReturnedEmptyContent: 'Templater 处理返回空内容,将尝试基本处理',
		templaterProcessingFailed: 'Templater 处理失败: {message}',
		fileAlreadyExists: '文件已存在: {file}',
		processingWithBasicTemplate: '使用基本模板处理',
		initialFileCreated: '初始文件已创建: {path}',
		fileContentUpdated: '文件内容已使用基本处理更新: {path}',
		templateFileNotFound: '未找到模板文件: {path}',
		failedToApplyTemplate: '应用模板失败: {message}',
		fileCreatedTemplateApplyFailed: '文件已创建,但应用模板失败: {message}',
		creatingFileNoTemplate: '创建文件(无模板): {path}',
		autoAddedTags: '自动添加标签到 {path}: {tags}',
		errorAddingAutoTags: '添加自动标签时出错',
		failedToCreateFile: '创建文件失败',
		failedToCreateFileMessage: '创建文件失败: {message}',
		renamedConflictingPath: '重命名冲突路径为: {path}',
		skippingExistingFile: '跳过已存在文件: {path}',
		addedAlias: '已将别名 "{alias}" 添加到文件 "{file}"',
		skippingExistingFileAtPath: '跳过特定路径下的已存在文件: {path}',
		skippingExistingFileInVault: '跳过仓库中已存在的文件: {file}',
		skippingExistingFileNoAliases: '跳过没有新别名的已存在文件: {path}',

		// UI 管理器
		operationComplete: '操作完成',
		successfullyCreated: '成功创建: {count} 个文件',
		skipped: '已跳过: {count} 个文件',
		failed: '失败: {count} 个文件',
		aliases: '别名: {count}',
		bulkRenameFiles: '批量重命名文件',
		currentPath: '当前路径',
		newPath: '新路径',
		batchReplace: '批量替换: ',
		find: '查找...',
		replaceWith: '替换为...',
		apply: '应用',
		cancel: '取消',
		confirmRename: '确认重命名',

		// 创建确认弹窗
		createFiles: '创建文件',
		linksDetected: '检测到 {count} 个链接。选择要创建的文件:',
		filename: '文件名',
		path: '路径',
		matchedRule: '匹配规则',
		actions: '操作',
		preview: '预览',
		previewFunctionNotAvailable: '预览功能不可用',
		failedToGeneratePreview: '生成预览失败: {message}',
		noFilesToCreate: '没有要创建的文件',
		page: '第 {current}/{total} 页,共 {fileCount} 个文件,已选择 {selectedCount} 个',
		previous: '上一页',
		next: '下一页',
		pleaseSelectAtLeastOneFile: '请至少选择一个文件',
		creatingFilesProgress: '正在创建文件',
		creatingFilesStatus: '正在创建文件 • {current} / {total}',
		fileCreationCompleted: '文件创建完成 ({total}/{total})',
		createSelectedFiles: '创建选中的文件',
		source: '源码',

		// 规则管理弹窗
		fileCreationRulesManagement: '文件创建规则管理',
		rulesManagementDescription: '规则根据文件名模式确定文件创建位置和模板。优先级从高到低列出。',
		searchRules: '搜索规则...',
		addRule: '添加规则',
		close: '关闭',
		noRulesCreatedYet: '尚未创建规则',
		rulesAutomateDescription: '规则可根据文件名自动配置文件位置和模板分配。',
		createFirstRule: '创建第一条规则',
		ruleName: '规则名称',
		matchConditions: '匹配条件',
		targetFolder: '目标文件夹',
		useTemplate: '使用模板',
		enabled: '已启用',
		disabled: '已禁用',
		editRule: '编辑规则',
		moveUp: '上移',
		moveDown: '下移',
		deleteRule: '删除规则',
		ruleDeleted: '规则已删除',
		confirmDeletion: '确认删除',
		confirmDeleteRule: '确定要删除规则 "{name}" 吗?',
		delete: '删除',
		noMatchConditions: '无匹配条件',

		// 条件操作符和类型
		and: '且',
		or: '或',
		not: '非',
		exclude: '排除',
		contains: '包含',
		beginsWith: '以...开头',
		endsWith: '以...结尾',
		matches: '精确匹配',
		regex: '正则匹配',

		// 规则编辑弹窗
		createRule: '创建规则',
		enable: '启用',
		enableDisableRule: '启用或禁用此规则',
		matching: '匹配',
		addCondition: '添加条件',
		targetSettings: '目标设置',
		targetFolderDesc: '匹配的文件将在此文件夹中创建',
		useTemplateDesc: '创建文件时使用的模板',
		selectTemplate: '选择模板',
		browseTemplates: '浏览模板',
		templateAliasHandling: '模板别名处理',
		templateAliasHandlingDesc: '控制使用 templater 时如何处理别名',
		skipTemplaterHandlesAliases: '跳过(由 templater 处理别名)',
		mergeWithTemplate: '与模板合并',
		clickAddCondition: '点击"添加条件"创建第一个匹配规则',
		save: '保存',
		ruleNameCannotBeEmpty: '规则名称不能为空',
		atLeastOneConditionRequired: '必须至少添加一个匹配条件',
		matchPatternCannotBeEmpty: '匹配模式不能为空',
		invalidRegularExpression: '无效的正则表达式',
		ruleSaved: '规则 "{name}" 已保存',
		ruleEditingCancelled: '规则编辑已取消',
		ruleNamePrompt: '规则名称',
		enterRuleName: '输入规则名称',
		noTemplatesFound: '未找到模板,请检查模板文件夹设置',

		// 通用输入提示
		noNewNameProvided: '未提供新名称',

		// 占位符
		exampleFolder: '示例: folder1/folder2',
		exampleTemplates: '示例: templates',
		newPathPlaceholder: '新路径...',

		// 通用值
		defaultValue: '(默认)',
		noneValue: '(无)',
		plusMoreConditions: '...还有 {count} 个条件',

		// Dashboard
		dashboardTitle: '缺失链接',
		dashboardCreateSelected: '创建所选',
		dashboardCreateSelectedTooltip: '创建选中的文件 (Cmd+Enter)',
		dashboardRefreshTooltip: '刷新数据 (Cmd+Shift+R)',
		dashboardSearchPlaceholder: '搜索链接...',
		dashboardScopeVault: '范围: 整个仓库',
		dashboardScopeActive: '范围: 当前文件',
		dashboardScopeSwitched: '范围切换为: {scope}',
		dashboardSortCountDesc: '引用数 (从高到低)',
		dashboardSortCountAsc: '引用数 (从低到高)',
		dashboardSortNameAsc: '名称 (A-Z)',
		dashboardSortNameDesc: '名称 (Z-A)',
		dashboardGroupByFolder: '按文件夹分组',
		dashboardListView: '列表视图',
		dashboardScanError: '扫描仓库出错: {message}',
		dashboardNoLinksSelected: '未选则链接',
		dashboardCreatedCount: '已创建 {current}/{total} 个文件',
		dashboardColName: '链接名称',
		dashboardColRef: '引用',
		dashboardColPath: '建议路径',
		dashboardColActions: '操作',
		dashboardNoMatchesTitle: '未找到匹配项',
		dashboardNoMatchesDesc: '没有链接匹配 "{query}"',
		dashboardAllClearTitle: '全部清除!',
		dashboardAllClearDesc: '仓库中未找到缺失链接。',
		dashboardShowingRows: '显示 {start}-{end} 共 {total} {unit}',
		dashboardPageInfo: '第 {current} / {total} 页',
		dashboardUnitLinks: '个链接',
		dashboardUnitFolders: '个文件夹',

		// Side View
		sideViewDisplayText: '当前文件链接',
		sideViewHeader: '当前文件缺失',
		sideViewRefresh: '刷新',
		sideViewNoActiveFile: '无活动文件',
		sideViewEmptyNoActive: '当前没有活动文件。',
		sideViewEmptyAllClear: '没有缺失链接!',
		sideViewCreateTooltip: '创建',
		sideViewIgnoreTooltip: '忽略',
		sideViewCreated: '已创建 "{file}"',
		sideViewCreatedWithRule: '✓ 已创建: {file} (规则: {rule})',
		sideViewCreatedNoRule: '✓ 已创建: {file}',
		sideViewIgnored: '已忽略 "{file}"',
		sideViewCreateFailed: '创建文件失败',
	}
};

type Locale = keyof typeof translations;

export function getLocale(): Locale {
	const lang = window.localStorage.getItem('language') || 'en-GB';
	return (lang in translations ? lang : 'en-GB') as Locale;
}

export function t(key: keyof typeof translations["en-GB"], params?: Record<string, string>): string {
	const locale = getLocale();
	let text = translations[locale][key] || translations["en-GB"][key];
	// 替换占位符
	if (params) {
		Object.keys(params).forEach(paramKey => {
			text = text.replace(new RegExp(`\\{${paramKey}\\}`, 'g'), params[paramKey]);
		});
	}
	return text;
}

/**
 * 调试函数：打印当前语言设置
 */
export function debugLocale(): void {
	console.log('=== Locale Debug Info ===');
	console.log('Current locale:', getLocale());
	console.log('localStorage language:', window.localStorage.getItem('language'));
	console.log('navigator.language:', navigator.language);
	console.log('moment locale:', (window as any).moment?.locale());
	console.log('========================');
}
